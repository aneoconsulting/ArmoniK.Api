syntax = "proto3";

import "objects.proto";
import "session_status.proto";  

option csharp_namespace = "ArmoniK.Api.gRPC.V1.Sessions";
package ArmoniK.api.grpc.V1.sessions;

service Sessions {
  // Get all sessions with pagination
  rpc ListSessions(ListSessionsRequest) returns (ListSessionsResponse);

  // Get a session using an ID.
  rpc GetSession(GetSessionRequest) returns (GetSessionResponse) {}
  // Cancel a session using an ID.
  rpc CancelSession(CancelSessionRequest) returns (CancelSessionResponse) {}
}

// Objects
message RawSession {
  // à compléter avec le schéma de la base de données
}

message PaginatedSesssion {
  // à compléter avec le schéma de la base de données
}

// Requests - Responses
message ListSessionsRequest {
  string page_token = 1;
  int32 page_size = 2;
  
  string applicationName = 3;
  string applicationVersion = 4;
  string orderBy = 5;
  string order = 6;
  string id = 7;
  string lastActivitySince = 8;
}

message ListSessionsResponse {
  repeated PaginatedSession sessions = 1;

  string next_page_token = 2;
}

message GetSessionRequest {
  string session_id = 1;
}

message GetSessionResponse {
  RawSession session = 1;
}

message CancelSessionRequest {
  string session_id = 1;
}

message CancelSessionResponse {
  RawSession session = 1;
}